<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rupsha Public Welfare Foundation</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&family=Poppins:wght@400;600;700&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --bg-color: #f0f2f5;
            --text-color: #1c1e21;
            --card-bg: #ffffff;
            --header-bg: #0f1c2c;
            --accent-color: #00ffaa;
            --font-family: 'Hind Siliguri', 'Poppins', sans-serif;
            --primary: #00ffcc;
            --form-card: #121212;
            --input-bg: #1a1a1a;
            --error: #ff4d4d;
            --notice-color: #ffcc00;
            --fb-blue: #1877F2;
        }

        .dark-theme {
            --bg-color: #121212;
            --text-color: #e4e6eb;
            --card-bg: #242526;
            --header-bg: #000000;
        }

        body { font-family: var(--font-family); background: var(--bg-color); color: var(--text-color); margin: 0; padding: 0; transition: all 0.4s ease; min-height: 100vh; display: flex; flex-direction: column; }
        
        #auth-screen { display: flex; justify-content: center; align-items: center; min-height: 100vh; background: #0f1c2c; padding: 20px; box-sizing: border-box; }
        .auth-container { background: white; padding: 30px; border-radius: 20px; width: 100%; max-width: 380px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); color: #333; text-align: center; }
        .auth-input { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd; box-sizing: border-box; font-size: 15px; margin-top: 10px; font-family: inherit; }
        .pass-wrapper { position: relative; width: 100%; }
        .toggle-icon { position: absolute; right: 12px; top: 22px; cursor: pointer; color: #666; font-size: 14px; }
        .auth-btn { width: 100%; padding: 13px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; margin-top: 15px; font-size: 16px; transition: 0.3s; font-family: inherit; }
        .btn-primary { background: #0f1c2c; color: white; }
        .btn-link { background: none; color: #1877F2; font-size: 14px; border: none; cursor: pointer; margin-top: 12px; text-decoration: underline; font-family: inherit; }
        
        /* Google Button Style */
        .btn-google { background: white; color: #555; border: 1px solid #ddd; display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 10px; }
        .btn-google img { width: 18px; }
        .divider { margin: 15px 0; border-bottom: 1px solid #eee; position: relative; }
        .divider span { position: absolute; top: -10px; left: 50%; transform: translateX(-50%); background: white; padding: 0 10px; color: #888; font-size: 12px; }

        #login-form, #signup-form, #reset-form { display: none; }
        
        #main-content { display: none; flex-direction: column; min-height: 100vh; background: var(--bg-color); }
        header { background: var(--header-bg); padding: 30px 20px; color: white; position: relative; border-bottom: 4px solid var(--accent-color); text-align: center; }
        .top-controls { position: absolute; top: 15px; right: 15px; display: flex; gap: 10px; }
        .control-btn { background: rgba(255,255,255,0.1); border: 1px solid var(--accent-color); color: white; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 12px; }
        .logo-img { width: 70px; height: 70px; border-radius: 50%; border: 2px solid var(--accent-color); margin-bottom: 10px; object-fit: cover; }
        .user-welcome { font-size: 14px; color: var(--accent-color); font-weight: bold; margin-bottom: 5px; }

        .dashboard-main { flex: 1; display: flex; justify-content: center; align-items: flex-start; padding: 40px 15px; }
        .meet-card { background: var(--card-bg); width: 100%; max-width: 400px; padding: 30px; border-radius: 24px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); text-align: center; border: 1px solid rgba(0,0,0,0.05); transition: transform 0.3s ease; }
        .dark-theme .meet-card { border: 1px solid #333; box-shadow: 0 15px 35px rgba(0,0,0,0.4); }
        .meet-icon-circle { width: 60px; height: 60px; background: rgba(40, 167, 69, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px auto; color: #28a745; font-size: 24px; }
        .meet-card h2 { font-family: 'Orbitron', sans-serif; font-size: 18px; margin: 0 0 15px 0; color: var(--text-color); text-transform: uppercase; letter-spacing: 1px; }
        .meet-card p { font-size: 13px; line-height: 1.6; color: #666; margin-bottom: 25px; }
        .dark-theme .meet-card p { color: #aaa; }
        .btn-stack { display: flex; flex-direction: column; gap: 12px; }
        .join-btn { display: flex; align-items: center; justify-content: center; gap: 10px; padding: 14px; border-radius: 14px; text-decoration: none; font-weight: 700; font-size: 14px; transition: 0.3s; color: #fff; font-family: 'Orbitron', sans-serif; }
        .google-meet { background: #ea4335; box-shadow: 0 4px 15px rgba(234, 67, 53, 0.3); }
        .zoom-meet { background: #2d8cff; box-shadow: 0 4px 15px rgba(45, 140, 255, 0.3); }
        .join-btn:hover { transform: translateY(-3px); filter: brightness(1.1); }

        .status-badge { display: inline-flex; align-items: center; gap: 6px; background: rgba(40, 167, 69, 0.1); padding: 5px 12px; border-radius: 20px; margin-bottom: 15px; border: 1px solid rgba(40, 167, 69, 0.2); }
        .status-dot { width: 8px; height: 8px; background: #28a745; border-radius: 50%; position: relative; }
        .status-dot::after { content: ''; position: absolute; width: 100%; height: 100%; background: #28a745; border-radius: 50%; animation: pulse-ring 1.5s infinite; left: 0; top: 0; }
        @keyframes pulse-ring { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(3); opacity: 0; } }
        .status-text { font-size: 11px; font-weight: 700; color: #28a745; text-transform: uppercase; }
        footer { padding: 15px; background: var(--header-bg); color: #888; text-align: center; font-size: 13px; }
    </style>
</head>
<body>

    <div id="auth-screen">
        <div class="auth-container">
            <img src="https://i.ibb.co.com/ycsrjKp6/20251128-004458.jpg" alt="Logo" class="logo-img">
            
            <div id="login-form" style="display: block;">
                <h2>Login</h2>
                <input type="email" id="login-email" class="auth-input" placeholder="Your email address">
                <div class="pass-wrapper">
                    <input type="password" id="login-pass" class="auth-input" placeholder="Your password">
                    <i class="fas fa-eye toggle-icon" onclick="togglePassword('login-pass', this)"></i>
                </div>
                <button class="auth-btn btn-primary" id="loginSubmit">লগইন</button>
                
                <div class="divider"><span>অথবা</span></div>
                
                <button class="auth-btn btn-google" id="googleLoginBtn">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
                    Google দিয়ে লগইন
                </button>

                <button class="btn-link" onclick="showForm('signup')">Register if you don't have an account.</button>
                <button class="btn-link" onclick="showForm('reset')">Forget password?</button>
            </div>

            <div id="signup-form">
                <h2>Registration</h2>
                <input type="text" id="signup-name" class="auth-input" placeholder="Your name">
                <input type="email" id="signup-email" class="auth-input" placeholder="Your email address">
                <div class="pass-wrapper">
                    <input type="password" id="signup-pass" class="auth-input" placeholder="Enter a password you can remember.">
                    <i class="fas fa-eye toggle-icon" onclick="togglePassword('signup-pass', this)"></i>
                </div>
                <button class="auth-btn btn-primary" id="signupSubmit" style="background: #188038;">registration</button>
                <button class="btn-link" onclick="showForm('login')">Login</button>
            </div>

            <div id="reset-form">
                <h2>Forget Password</h2>
                <input type="email" id="reset-email" class="auth-input" placeholder="Give your email address">
                <button class="auth-btn btn-primary" id="resetSubmit">Send link</button>
                <button class="btn-link" onclick="showForm('login')">Home</button>
            </div>
            <p id="auth-msg" style="font-size: 13px; margin-top: 10px; display: none; padding: 10px; border-radius: 8px; line-height: 1.4;"></p>
        </div>
    </div>

    <div id="main-content">
        <header>
            <div class="top-controls">
                <button class="control-btn" onclick="toggleDarkMode()" id="themeIcon"><i class="fas fa-moon"></i></button>
                <button class="control-btn" onclick="logoutUser()" style="border-color:#ff4d4d; color:#ff4d4d;">Logout</button>
            </div>
            <img src="https://i.ibb.co.com/ycsrjKp6/20251128-004458.jpg" alt="Logo" class="logo-img">
            <div class="user-welcome" id="userNameDisplay">Processing...</div>
            <h1 style="color:white;">রুপসা জনকল্যাণ ফাউন্ডেশন লাইভ মিটিং সেকশন</h1>
        </header>

        <main class="dashboard-main">
            <div class="meet-card">
                <div class="status-badge">
                    <div class="status-dot"></div>
                    <span class="status-text">Active now <span id="userLiveBadge">...</span></span>
                </div>

                <div class="meet-icon-circle">
                    <i class="fas fa-video"></i>
                </div>
                <h2>Join live conference</h2>
                <p>মিটিংয়ে অংশগ্রহণ করার জন্য আমাদের 2টা মাধ্যম আছে যখন মিটিং থাকবে তখন লিংক গুলা সক্রিয় থাকবে তাছাড়া লিংকগুলা অক্রিয় অবস্থায় থাকবে। join এ ক্লিক করে অংশগ্রহণ করুন। তবে এখন কোন মিটিং নেই তাই host উপস্থিত নেই। যখন মিটিং থাকবে তখন তারিখ এবং সময় উল্লেখ্য থাকবে। রুপসা জনকল্যাণ ফাউন্ডেশনের সাথে থাকার জন্য ধন্যবাদ।</p>
                
                <div class="btn-stack">
                    <a class="join-btn google-meet" href="https://meet.google.com/ovr-zebh-xrc" target="_blank">
                        <i class="fab fa-google"></i> JOIN GOOGLE MEET
                    </a>
                    <a class="join-btn zoom-meet" href="https://us05web.zoom.us/j/3364599214?pwd=rfznlEZujHOrQ1hg8subGX8TanM1xS.1&omn=87521248706" target="_blank">
                        <i class="fas fa-video"></i> JOIN ZOOM APP
                    </a>
                </div>
            </div>
        </main>

        <footer>
            <p>© 2026 All rights reserved with RJ Foundation</p>
        </footer>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut, sendPasswordResetEmail, updateProfile, sendEmailVerification, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCe_CgQLWZND9e5rofK1z4mcnBptrLiZlo",
            authDomain: "rjfoundetion-25.firebaseapp.com",
            projectId: "rjfoundetion-25",
            storageBucket: "rjfoundetion-25.firebasestorage.app",
            messagingSenderId: "247020927055",
            appId: "1:247020927055:web:94d86ac7eb47b4e950d23a"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        // গুগল সাইন ইন ফাংশন
        document.getElementById('googleLoginBtn').addEventListener('click', () => {
            signInWithPopup(auth, provider).then((result) => {
                // গুগল দিয়ে করলে ভেরিফিকেশন অটোমেটিক হয়ে যায়
                console.log("Google Login Success");
            }).catch((error) => {
                notify("⚠️ গুগল লগইন ব্যর্থ হয়েছে!", "err");
            });
        });

        window.togglePassword = (inputId, icon) => {
            const input = document.getElementById(inputId);
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.replace('fa-eye', 'fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.replace('fa-eye-slash', 'fa-eye');
            }
        };

        window.showForm = (type) => {
            document.getElementById('login-form').style.display = type === 'login' ? 'block' : 'none';
            document.getElementById('signup-form').style.display = type === 'signup' ? 'block' : 'none';
            document.getElementById('reset-form').style.display = type === 'reset' ? 'block' : 'none';
            document.getElementById('auth-msg').style.display = 'none';
        }

        const notify = (msg, type) => {
            const el = document.getElementById('auth-msg');
            el.innerHTML = msg;
            el.style.display = 'block';
            el.style.background = type === 'err' ? '#ffebee' : '#e8f5e9';
            el.style.color = type === 'err' ? '#c62828' : '#2e7d32';
        }

        document.getElementById('signupSubmit').addEventListener('click', () => {
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const pass = document.getElementById('signup-pass').value;
            if(!name) return notify("⚠️ নাম লিখুন", "err");
            
            createUserWithEmailAndPassword(auth, email, pass).then((res) => {
                updateProfile(res.user, { displayName: name }).then(() => {
                    sendEmailVerification(res.user).then(() => {
                        notify("<b>সফলভাবে অ্যাকাউন্ট তৈরি হয়েছে!</b><br>আপনার ইমেইলে একটি ভেরিফিকেশন লিঙ্ক পাঠানো হয়েছে। লিঙ্কটি ক্লিক করে ভেরিফাই করুন। <br><i>(ইনবক্সে না পেলে Spam মেসেজে দেখুন)</i>", "success");
                        signOut(auth); 
                        setTimeout(() => showForm('login'), 8000); 
                    });
                });
            }).catch(e => notify("⚠️ রেজিস্ট্রেশন হয়নি! ইমেইল সঠিক কি না বা পাসওয়ার্ড কমপক্ষে ৬ অক্ষর কি না দেখুন।", "err"));
        });

        document.getElementById('loginSubmit').addEventListener('click', () => {
            const email = document.getElementById('login-email').value;
            const pass = document.getElementById('login-pass').value;
            signInWithEmailAndPassword(auth, email, pass).catch(e => notify("⚠️ ইমেইল বা পাসওয়ার্ড ভুল অথবা ভেরিফিকেশন করা হয়নি!", "err"));
        });

        document.getElementById('resetSubmit').addEventListener('click', () => {
            const email = document.getElementById('reset-email').value;
            sendPasswordResetEmail(auth, email).then(() => notify("রিসেট লিঙ্ক পাঠানো হয়েছে!", "success")).catch(() => notify("ইউজার পাওয়া যায়নি!", "err"));
        });

        window.logoutUser = () => signOut(auth);

        onAuthStateChanged(auth, (user) => {
            if (user) {
                // গুগল প্রোভাইডার দিয়ে করলে ইমেইল ভেরিফিকেশন চেক করার দরকার নেই
                const isGoogleUser = user.providerData.some(p => p.providerId === 'google.com');
                
                if(user.emailVerified || isGoogleUser) {
                    document.getElementById('auth-screen').style.display = 'none';
                    document.getElementById('main-content').style.display = 'flex';
                    
                    const displayName = user.displayName || 'ইউজার';
                    document.getElementById('userNameDisplay').innerText = `স্বাগতম, ${displayName}`;
                    document.getElementById('userLiveBadge').innerText = displayName;

                } else {
                    notify("<b>আপনার ইমেইলটি ভেরিফাই করা হয়নি!</b><br>অনুগ্রহ করে আপনার ইমেইল ইনবক্স (অথবা Spam ফোল্ডার) চেক করুন এবং লিঙ্কটি ক্লিক করুন।", "err");
                    signOut(auth);
                }
            } else {
                document.getElementById('auth-screen').style.display = 'flex';
                document.getElementById('main-content').style.display = 'none';
            }
        });

        window.toggleDarkMode = () => {
            document.body.classList.toggle('dark-theme');
            const icon = document.querySelector('#themeIcon i');
            if(icon.classList.contains('fa-moon')) {
                icon.classList.replace('fa-moon', 'fa-sun');
            } else {
                icon.classList.replace('fa-sun', 'fa-moon');
            }
        }
    </script>
</body>
</html>
